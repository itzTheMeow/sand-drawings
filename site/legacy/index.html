<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="og:title" content="Sand Drawings" />
    <meta
      name="og:image"
      content="https://cdn.glitch.com/940018fc-c2fe-427c-a43b-34505af82640%2FLogo.png?v=1576860889288"
    />
    <meta name="og:description" content="Draw with sand!" />
    <meta name="og:site_name" content="sand-drawings" />
    <meta name="keywords" content="sand-drawings" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sandbox</title>
    <link
      rel="icon"
      href="https://cdn.glitch.com/940018fc-c2fe-427c-a43b-34505af82640%2FLogo.png?v=1576860889288"
    />

    <script src="https://code.jquery.com/jquery-3.5.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>
    <script
      id="lzutf8"
      src="https://cdn.jsdelivr.net/npm/lzutf8/build/production/lzutf8.min.js"
    ></script>

    <link rel="stylesheet" href="./css/color.css" />
    <link rel="stylesheet" href="./css/style.css" />
  </head>

  <body>
    <div class="box" float-left>
      <canvas width="500" height="500" id="game">
        Your browser does not support canvas :(
      </canvas>
    </div>
    <div id="cursor"></div>

    <!--
<div class="box box-withtitle">
  <table>
    <tr>

    </tr>
  </table>
</div>
-->

    <div class="box box-withtitle" id="solids">
      <div class="box-title" id="solids-title">Solids</div>
      <table>
        <tr>
          <td>
            <button
              class="element-button"
              onclick="tool(SAND);"
              id="SAND"
              title="Change your tool to Sand"
            >
              Sand
            </button>
          </td>

          <td>
            <button
              class="element-button"
              onclick="tool(CONCRETE);"
              id="CONCRETE"
            >
              Concrete
            </button>
          </td>
          <td>
            <button
              class="element-button"
              onclick="tool(LIFE);"
              id="LIFE"
              title=""
            >
              Life
            </button>
          </td>
          <td>
            <button
              class="element-button"
              onclick="tool(SALT);"
              id="SALT"
              title=""
            >
              Salt
            </button>
          </td>
          <td>
            <button
              class="element-button"
              onclick="tool(WOOD);"
              id="WOOD"
              title=""
            >
              Wood
            </button>
          </td>
          <td>
            <button
              class="element-button"
              onclick="tool(WALL);"
              id="WALL"
              title=""
            >
              Wall
            </button>
          </td>
        </tr>
      </table>
    </div>
    <div class="box box-withtitle" id="spawners">
      <div class="box-title" id="spawners-title">Spawners</div>
      <table>
        <tr>
          <td>
            <button
              class="element-button"
              onclick="tool(SPRING);"
              id="SPRING"
              title=""
            >
              Spring
            </button>
          </td>
          <td>
            <button
              class="element-button"
              onclick="tool(OIL_WELL);"
              id="OIL_WELL"
              title=""
            >
              Oil Well
            </button>
          </td>
          <td>
            <button
              class="element-button"
              onclick="tool(GAS_PUMP);"
              id="GAS_PUMP"
              title=""
            >
              Gas Pump
            </button>
          </td>
          <td>
            <button
              class="element-button"
              onclick="tool(VOLCANO);"
              id="VOLCANO"
              title=""
            >
              Volcano
            </button>
          </td>
        </tr>
      </table>
    </div>
    <div class="box box-withtitle" id="liquids">
      <div class="box-title" id="liquids-title">Liquids</div>
      <table>
        <tr>
          <td>
            <button class="element-button" onclick="tool(WATER);" id="WATER">
              Water
            </button>
          </td>
          <td>
            <button
              class="element-button"
              onclick="tool(SALT_WATER);"
              id="SALT_WATER"
            >
              Salt Water
            </button>
          </td>

          <td>
            <button class="element-button" onclick="tool(FIRE);" id="FIRE">
              Fire
            </button>
          </td>
          <td>
            <button class="element-button" onclick="tool(OIL);" id="OIL">
              Oil
            </button>
          </td>

          <td>
            <button
              class="element-button"
              onclick="tool(GASOLINE);"
              id="GASOLINE"
            >
              Gasoline
            </button>
          </td>
          <td>
            <button
              class="element-button"
              onclick="tool(DARK_MATTER);"
              id="DARK_MATTER"
            >
              Dark Matter
            </button>
          </td>
          <td>
            <button class="element-button" onclick="tool(LAVA);" id="LAVA">
              Lava
            </button>
          </td>
        </tr>
      </table>
    </div>

    <div id="other">
      <p id="size">
        <button onclick="test.mouse.size = 50;">Gigantic</button>
        <button onclick="test.mouse.size = 20;">Large</button>
        <button onclick="test.mouse.size = 5;">Medium</button>
        <button onclick="test.mouse.size = 2;">Small</button>
        <button onclick="test.mouse.size = 1;">Micro</button>
        <button onclick="test.mouse.size = 200;">Hax</button>
        <button onclick="test.mouse.size = 400;">Chonker</button>
      </p>
      <p id="other-">
        <button onclick="test.clear();">Clear</button>
        <button onclick="test.fill();">Fill</button>
        <button onclick="test.updateDelay = 100;">x0.5</button>
        <button onclick="test.updateDelay = 8;">x1</button>
        <button onclick="test.updateDelay = 5;">x2</button>
        <button onclick="test.updateDelay = 0;">x3</button>

        <button
          onclick="window.location.href='https://discordapp.com/oauth2/authorize?client_id=705470771287293963&redirect_uri=https%3A%2F%2Fsand-drawings.glitch.me%2Fdiscord-auth&response_type=token&scope=identify%20gdm.join'"
        >
          Link Discord
        </button>
        Your ID: <b id="id"></b>
      </p>
    </div>

    <footer>
      <span>
        Inspired by
        <a
          href="https://github.com/Kledal/html5-sand-game"
          style="color: inherit"
          >Kledal</a
        >
      </span>

      <div id="hotkeys" onclick="showHotkeys()" style="float: right">[F1]</div>
    </footer>

    <div id="tooltip">Tooltip</div>

    <script src="./js/game.js"></script>
    <script src="./js/draw2d.js"></script>
    <script src="./js/spawner.js"></script>
    <script src="./js/mouse.js"></script>
    <script src="./js/drag.js"></script>

    <script>
      let mobile =
        /Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(
          navigator.userAgent
        );
      if (mobile)
        alert("This game has semi-support for mobile. Proceed with caution.");

      window.test = { mouse: {} };
      window.test = new Game();

      alert(
        "This is the legacy version of Sand Drawings. Support will not be provided for this version. It may not function."
      );

      var tool = (t) => {
        test.mouse.tool = t;
      };

      var emitMessage = (content, name) => {
        document.getElementById("msgs").innerHTML +=
          "<b>" + name + ":</b> " + content + "<br>";
        document.getElementById("msgs").scrollTop = 9999;
      };

      document.getElementById("id").innerHTML = test.id;

      document.addEventListener("keyup", function (e) {
        if (e.key == "Tab") {
          let g = document.getElementById("game");
          if (g.style.cursor == "none") {
            g.style.cursor = "crosshair";
          } else {
            g.style.cursor = "none";
          }
        }
      });
    </script>
  </body>
</html>
